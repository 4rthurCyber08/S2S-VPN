# Certificates

## CA Hierarchy

1. ROOT CA
   - X509v3
   - Basic Constraints [Critical]
       CA
   - Key Usage [Critical]
       Certificate Sign
       CRL Sign

<br>

2. SUB CA
   - X509v3
   - Basic Constraints [Critical]
       CA
	   Path Len: 0
   - Key Usage [Critical]
       Certificate Sign
       CRL Sign

<br>

3. LEAF CA
   - X509v3
   - Basic Constraints [Critical]
       END-ENTITY
   - Extensions
       Subject Alt Names
   - Key Usage [Critical]
       Digital Signature
	   Key Encipherment
	   Data Encipherment
	   Key Agreement
   - Extended Key Usage
       TLS Web Server Authentication
       TLS Web Client Authentication	   
	   E-mail Protection
	   IPSec End System
	   IPSec Tunnel
	   IPSec User
	   IP Security end entity


<br>
<br>

---
&nbsp; 


## Certificates via XCA

### STEP 1. Set a domain name for clients
 
~~~
!@Cisco
conf t
 ip domain name RIVANPH.COM
 end
~~~


<br>
<br>

---
&nbsp; 


### STEP 2. Import the ROOT CA

~~~ 
!@Cisco
conf t
 crypto pki trustpoint RIVAN-CA
  enrollment terminal
  revocation-check crl none
  exit
 !
 crypto pki authenticate RIVAN-CA
~~~


<br>
<br>

---
&nbsp;


### STEP 3. Generate CSR

~~~
!@Cisco
conf t
 crypto pki trustpoint RIVANPH
  enrollment terminal
  exit
 !
 crypto pki enroll RIVANPH
 !
 
~~~


<br>


__PEM Header & Footer__  

-----BEGIN CERTIFICATE REQUEST-----

-----END CERTIFICATE REQUEST-----


<br>


~~~
!@Cisco
conf t
 crypto pki authenticate RIVANPH
~~~
 

<br>
<br>

---
&nbsp;


### STEP 4. Import the Signed CSR

~~~
!@Cisco
conf t
 crypto pki import RIVANPH certificate
 end
~~~
 
 